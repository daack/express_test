{% extends 'base.html' %}

{% block contents %}
	{% if logged %}
		<div class="ui middle aligned center aligned grid">
			<div class="column">
				<h2 class="ui teal image header">
					<div class="content">
						Benvenuto, {{logged}}
					</div>
				</h2>
				{% if success %}
					<div class="ui success message">{{success}}</div>
				{% endif %}
			</div>
		</div>
	{% else %}
		<div id="root"></div>
		<div class="ui middle aligned center aligned grid" style="display:none;">
			<div class="column">
				<h2 class="ui teal image header">
					<div class="content">
						Accedi
					</div>
				</h2>
				<form class="ui large form" method="POST" action="auth/">
					<div class="ui stacked segment">
						<div class="field">
							<div class="ui left icon input">
								<i class="user icon"></i>
								<input type="text" name="username" placeholder="Utente">
							</div>
						</div>
						<div class="field">
							<div class="ui left icon input">
								<i class="lock icon"></i>
								<input type="password" name="password" placeholder="Password">
							</div>
						</div>
						<button type="submit" class="ui fluid large teal submit button">Accedi</button>
					</div>

					{% if error %}
						<div class="ui error message">{{error}}</div>
					{% endif %}

				</form>
			</div>
		</div>

		<script src="https://cdn.auth0.com/js/lock/10.16.0/lock.min.js"></script>
		<script>
			var lock = new Auth0Lock('{{env.AUTH0_CLIENT_ID}}', '{{env.AUTH0_DOMAIN}}', { auth: {
				redirectUrl: '{{env.AUTH0_CALLBACK_URL}}'
				, responseType: 'code'
				, params: {
				scope: 'openid profile'
				}
			}});
			lock.show();
		</script>
	{% endif %}
{% endblock %}